extends ../layouts/layout

block append head
    //link(rel="stylesheet", href="/stylesheets/partials/b-tabs.css")
    //link(rel="stylesheet", href="/stylesheets/partials/b-inside-tabs.css")
    //link(rel="stylesheet", href="/stylesheets/partials/b-popup-verification.css")
    link(rel="stylesheet", href="/stylesheets/partials/jquery.gritter.css")

block content

    =message

    .b-tabs
        .b-tabs__tab.b-tabs__js-active-tab(id='registration-bids')
            | ЗАЯВКИ НА РЕГИСТРАЦИЮ
        .b-tabs__tab.b-tabs__js-inactive-tab(id='polygraphies-list')
            | СПИСОК ПОЛИГРАФИЙ
    .b-inside-tabs
        .b-inside-tabs__content.b-inside-tabs__js-inside-active-tab(id='inside-registration-bids')
            .b-inside-tabs__table-container
                table.b-inside-tabs__table
                    tr
                        th.b-inside-tabs__table-head
                            | E-mail
                        th.b-inside-tabs__table-head
                            | Ссылка для регистрации
                        th.b-inside-tabs__table-head
                            | Действия
                    for request in requests
                        tr.b-inside-tabs__table-row
                            td.b-inside-tabs__table-col
                                = request.email
                            td.b-inside-tabs__table-col
                                if request.hash
                                    a.b-inside-tabs__take-link(href='#{request.link}', id='#{request.id}')= request.link
                                else
                                    .b-inside-tabs__generate-link
                                        a.b-inside-tabs__get-link(href='/admin/registration-link', id='#{request.id}')
                                            | Отправить приглашение
                                    .b-inside-tabs__link
                                        a(href='#{generate}', id='#{request.id}')= generate
                            td.b-inside-tabs__table-col
                                button.b-inside-tabs__option.b-inside-tabs__js-remove-bid(type='button', id='#{request.id}')
                                    | Удалить
        .b-inside-tabs__content.b-inside-tabs__js-inside-inactive-tab(id='inside-polygraphies-list')
            .b-inside-tabs__table-container
                table.b-inside-tabs__table
                    tr
                        th.b-inside-tabs__table-head
                            | Название
                        th.b-inside-tabs__table-head
                            | E-mail
                        th.b-inside-tabs__table-head
                            | Есть в поиске
                        th.b-inside-tabs__table-head
                            | Действия

                    for polygraphy in polygraphies
                        tr.b-inside-tabs__table-row
                            td.b-inside-tabs__table-col
                                = polygraphy.name
                            td.b-inside-tabs__table-col
                                = polygraphy.email
                            td.b-inside-tabs__table-col
                                if polygraphy.displayed
                                    - checked  = true
                                else
                                    -checked = false
                                input.b-inside-tabs__checkbox(type='checkbox', id='#{polygraphy.id}', checked=checked)
                                label.b-inside-tabs__label(for='#{polygraphy.id}', data-name='#{polygraphy.name}')
                            td.b-inside-tabs__table-col.b-inside-tabs_col-edit
                                .b-inside-tabs__button-container
                                    button.b-inside-tabs__option(type='button', id='#{polygraphy.id}')
                                        a(href='/admin/polygraphy/#{polygraphy.id}/edit')
                                            | Редактировать
                                .b-inside-tabs__button-container
                                    button.b-inside-tabs__option.b-inside-tabs__js-remove-from-search(type='button', id='#{polygraphy.id}')
                                        | Удалить
    .b-popup-verification
        .b-popup-verification__window
            .b-popup-verification__main
                | Вы уверены?
                br
                | Это действие уничтожит все данные об этой полиграфии.
                button.b-popup-verification__answer.yes(type='button', answer='yes')
                    | Подтвердить
                button.b-popup-verification__answer.no(type='button', answer='no')
                    | Отмена

block append javascript
    script(type='application/javascript', src='/vendor/scripts/jquery.gritter.min.js')
    script(type='application/javascript', src='/vendor/scripts/jquery.gritter.js')
    //script(type='application/javascript', src='/scripts/partials/admin.js')